<html lang="sv">
<%- include("../partials/head.ejs") %> 

<body>
  <header>
  <%- include ("../partials/nav.ejs") %>
  </header>
<main>

  <section class="form__section">
    <div class="form__section--txt">
      <h2>Registrera dig här:</h2>
      <form action="" 
      class="form__register"
      id="createUserForm">
        <span>
          <label for="name">
          Användarnamn:</label>
          <input type="text" 
          id="name" 
          name="username" 
          required>
        </span>
        <span>
          <label for="email">
            Email:</label>
          <input type="email" 
          id="email" 
          name="email" 
          required>
        </span>
        <span>
        <label for="password">
          Lösenord:</label>
        <input type="password" 
        id="password" 
        name="password" 
        required>
        </span>
        <!-- <span class="row profilbildspan">
          <label for="getFile"
          >
            Välj profilbild 
          </label>
          <button 
          class="profilbildButt"
          onclick="document.getElementById('getFile').click()">Ladda upp bild</button>
          <input type='file' 
          id="getFile" >
        </span> -->

        <button 
        class="txtbuttonHover largeButt">
          Bli medlem</button>
        
      </form>
    </div>
  </section>

  
<aside class="quotes">
  <%- include ("../partials/quotes.ejs") %>
</aside>
  <%- include("../partials/footer.ejs") %>
</body>
<script>

  //assigning variables
  const createForm = document.getElementById("createUserForm");
  const createName = document.getElementById("name");
  const createEmail = document.getElementById("email");
  const createPassword = document.getElementById("password");

  createForm.addEventListener("submit", async (e) => {
    e.preventDefault();

    const response = await fetch("/api/users", {
      method: "POST",
      headers: {
        "content-type": "application/json"
      },
      body: JSON.stringify({
        accountname: createName.value,
        email: createEmail.value,
        password: createPassword.value
      })
    })
    const data = await response.json();
    location.reload();
  })

</script>
</html>
</main>